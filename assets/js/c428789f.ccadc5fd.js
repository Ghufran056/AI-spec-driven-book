"use strict";(globalThis.webpackChunkai_driven_book=globalThis.webpackChunkai_driven_book||[]).push([[116],{849:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"chapter3/3.3-services-actions","title":"Services & Actions","description":"Learning Objectives","source":"@site/docs/chapter3/3.3-services-actions.mdx","sourceDirName":"chapter3","slug":"/chapter3/3.3-services-actions","permalink":"/AI-spec-driven-book/docs/chapter3/3.3-services-actions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter3/3.3-services-actions.mdx","tags":[],"version":"current","frontMatter":{"id":"3.3-services-actions","title":"Services & Actions","sidebar_label":"3.3 - Services & Actions"},"sidebar":"tutorialSidebar","previous":{"title":"3.2 - Nodes, Topics, Publishers, Subscribers","permalink":"/AI-spec-driven-book/docs/chapter3/3.2-nodes-topics-publishers-subscribers"},"next":{"title":"3.4 - ROS Interfaces (Messages)","permalink":"/AI-spec-driven-book/docs/chapter3/3.4-ros-interfaces-messages"}}');var r=i(4848),t=i(8453);const o={id:"3.3-services-actions",title:"Services & Actions",sidebar_label:"3.3 - Services & Actions"},c="Services & Actions",a={},l=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Main Theory",id:"main-theory",level:2},{value:"1. Services",id:"1-services",level:3},{value:"2. Action Architecture",id:"2-action-architecture",level:3},{value:"3. Service Messages",id:"3-service-messages",level:3},{value:"4. Action Messages",id:"4-action-messages",level:3},{value:"5. Service Servers",id:"5-service-servers",level:3},{value:"6. Action Servers",id:"6-action-servers",level:3},{value:"Examples",id:"examples",level:2},{value:"Example: Service for Position Query",id:"example-service-for-position-query",level:3},{value:"Example: Action for Navigation",id:"example-action-for-navigation",level:3},{value:"Example: Service Implementation",id:"example-service-implementation",level:3},{value:"Practical Notes",id:"practical-notes",level:2},{value:"Summary",id:"summary",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Quick Quiz",id:"quick-quiz",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"services--actions",children:"Services & Actions"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Distinguish between services and actions in ROS 2"}),"\n",(0,r.jsx)(n.li,{children:"Understand the request-reply communication pattern of services"}),"\n",(0,r.jsx)(n.li,{children:"Explain the goal-result-feedback pattern of actions"}),"\n",(0,r.jsx)(n.li,{children:"Implement simple services and actions in ROS 2"}),"\n",(0,r.jsx)(n.li,{children:"Choose the appropriate communication method for different use cases"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"While the publish-subscribe pattern is excellent for continuous data streams, many robotics applications require more structured communication patterns. Services provide synchronous request-reply communication, ideal for tasks that have a clear beginning and end, like requesting sensor data or commanding a specific action. Actions, introduced in ROS 2, provide a more sophisticated pattern for long-running tasks that may take time to complete and need to provide periodic feedback, such as navigation to a goal or complex manipulation tasks."}),"\n",(0,r.jsx)(n.p,{children:"Services and actions complement the publish-subscribe model by providing communication patterns for specific interaction types. Services are perfect for immediate, synchronous operations that return a result, while actions are designed for operations that may take significant time and need to provide ongoing feedback about their progress."}),"\n",(0,r.jsx)(n.h2,{id:"main-theory",children:"Main Theory"}),"\n",(0,r.jsx)(n.h3,{id:"1-services",children:"1. Services"}),"\n",(0,r.jsx)(n.p,{children:"Services provide a request-reply communication pattern where a client sends a request to a server and waits for a response. This synchronous communication is ideal for operations that have a definite start and end point, such as requesting a map, saving a configuration, or performing a calculation."}),"\n",(0,r.jsx)(n.h3,{id:"2-action-architecture",children:"2. Action Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Actions extend the service concept to handle long-running operations. They provide a goal-result-feedback cycle where a client can send a goal, receive periodic feedback about progress, and eventually receive a result when the operation completes (or is canceled)."}),"\n",(0,r.jsx)(n.h3,{id:"3-service-messages",children:"3. Service Messages"}),"\n",(0,r.jsx)(n.p,{children:"Service messages have two parts: a request message (sent by the client) and a response message (sent by the server). These are defined in .srv files with the request and response separated by three dashes (---)."}),"\n",(0,r.jsx)(n.h3,{id:"4-action-messages",children:"4. Action Messages"}),"\n",(0,r.jsx)(n.p,{children:"Action messages have three parts: goal (sent by the client), feedback (periodically sent by the server), and result (sent once when the action completes). These are defined in .action files."}),"\n",(0,r.jsx)(n.h3,{id:"5-service-servers",children:"5. Service Servers"}),"\n",(0,r.jsx)(n.p,{children:"Service servers are responsible for receiving requests and sending responses. They register a callback function that processes incoming requests and returns the appropriate response."}),"\n",(0,r.jsx)(n.h3,{id:"6-action-servers",children:"6. Action Servers"}),"\n",(0,r.jsx)(n.p,{children:"Action servers handle goal requests, provide ongoing feedback, and eventually return results. They manage the state of long-running operations and handle cancellation requests."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Service Communication:\n\nClient Node \u2192 [Request] \u2192 Service Server Node\nClient Node \u2190 [Response] \u2190 Service Server Node\n\nAction Communication:\n\nClient Node \u2192 [Goal] \u2192 Action Server Node\nClient Node \u2190 [Feedback] \u2190 Action Server Node (repeatedly)\nClient Node \u2190 [Result] \u2190 Action Server Node (at completion)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"example-service-for-position-query",children:"Example: Service for Position Query"}),"\n",(0,r.jsx)(n.p,{children:"A service that accepts a robot's ID and returns its current position. The client sends the ID, the server looks up the position in its database, and returns the coordinates."}),"\n",(0,r.jsx)(n.h3,{id:"example-action-for-navigation",children:"Example: Action for Navigation"}),"\n",(0,r.jsx)(n.p,{children:"A navigation action where the client sends a destination goal, the server periodically reports progress (distance remaining, estimated time), and finally returns whether the navigation succeeded or failed."}),"\n",(0,r.jsx)(n.h3,{id:"example-service-implementation",children:"Example: Service Implementation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Service definition in .srv file:\n# int64 x\n# int64 y\n# ---\n# bool success\n# string message\n\n# Server implementation:\ndef handle_add_two_ints(self, request, response):\n    response.sum = request.a + request.b\n    response.success = True\n    response.message = "Calculation completed"\n    return response\n'})}),"\n",(0,r.jsx)(n.h2,{id:"practical-notes",children:"Practical Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use services for operations that complete quickly and return a definitive result"}),"\n",(0,r.jsx)(n.li,{children:"Use actions for operations that take time, may be canceled, or need to provide feedback"}),"\n",(0,r.jsx)(n.li,{children:"Services block the client until the response is received"}),"\n",(0,r.jsx)(n.li,{children:"Actions allow clients to continue working while the operation runs"}),"\n",(0,r.jsx)(n.li,{children:"Both services and actions can be called from command line tools (ros2 service, ros2 action)"}),"\n",(0,r.jsx)(n.li,{children:"Action clients can cancel goals or request feedback on demand"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"Services and actions provide essential communication patterns that complement the publish-subscribe model in ROS 2. Services offer synchronous request-reply communication for immediate operations, while actions provide a sophisticated framework for long-running tasks with progress feedback. Understanding when to use each pattern is crucial for designing effective robot applications that communicate efficiently and respond appropriately to timing requirements."}),"\n",(0,r.jsx)(n.h2,{id:"glossary",children:"Glossary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service"}),": A communication pattern using request-reply semantics for synchronous operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action"}),": A communication pattern for long-running operations with goal-result-feedback cycle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Server"}),": A node that responds to service requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Client"}),": A node that sends service requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action Server"}),": A node that executes long-running operations and provides feedback"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action Client"}),": A node that sends goals to action servers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request"}),": The message sent by a client to a service server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Response"}),": The message returned by a service server to a client"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": The initial request sent to an action server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feedback"}),": Periodic updates sent from an action server during execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": The final outcome sent by an action server when execution completes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Synchronous"}),": Communication where the sender waits for a response before continuing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Asynchronous"}),": Communication where the sender continues without waiting for a response"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-quiz",children:"Quick Quiz"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"What is the main difference between services and actions in ROS 2?\nA) Services are faster than actions\nB) Services are for immediate operations, actions are for long-running operations with feedback\nC) Services use UDP, actions use TCP\nD) There is no difference between them"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"What pattern does a service use for communication?\nA) Publish-subscribe\nB) Request-reply\nC) Broadcast-response\nD) Poll-request"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Which of the following is NOT a component of action communication?\nA) Goal\nB) Feedback\nC) Result\nD) Topic"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"When should you use an action instead of a service?\nA) For quick calculations\nB) For operations that take time and need feedback\nC) For publishing sensor data\nD) For subscribing to topics"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"What happens when a client calls a service?\nA) The client continues working immediately\nB) The client blocks until the response is received\nC) The service runs in the background\nD) The client subscribes to a topic"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Answers:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"B) Services are for immediate operations, actions are for long-running operations with feedback"}),"\n",(0,r.jsx)(n.li,{children:"B) Request-reply"}),"\n",(0,r.jsx)(n.li,{children:"D) Topic"}),"\n",(0,r.jsx)(n.li,{children:"B) For operations that take time and need feedback"}),"\n",(0,r.jsx)(n.li,{children:"B) The client blocks until the response is received"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);